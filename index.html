<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chattanooga Hackers Anonymous (CHA)</title>
  <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: 
        linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.9)), 
        url('aW1hZ2VzCg==/background.png') no-repeat center center fixed;
      background-size: 100% 100%;
      font-family: 'Courier New', Courier, monospace;
      color: #33ff33;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .window {
      width: 800px;
      height: 480px;
      background-color: rgba(0, 0, 0, 0.95);
      box-shadow: 0 0 30px #00ff00;
      border: 1px solid #222;
      display: flex;
      flex-direction: column;
    }

    .title-bar {
      height: 30px;
      background-color: #222;
      display: flex;
      align-items: center;
      padding: 0 10px;
      color: #ccc;
      font-size: 0.9rem;
      justify-content: space-between;
    }

    .window-controls {
      display: flex;
      gap: 6px;
    }

    .window-controls div {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #444;
    }

    .close { background-color: #ff5f56; }
    .minimize { background-color: #ffbd2e; }
    .maximize { background-color: #27c93f; }

    .terminal {
      flex-grow: 1;
      padding: 20px;
      overflow-y: auto;
      border-top: 1px solid #333;
    }

    .terminal-content {
      position: relative;
      z-index: 2;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .prompt {
      font-weight: bold;
      display: flex;
      align-items: center;
      margin-top: 8px;
      visibility: hidden;
    }

    .cursor {
      width: 10px;
      height: 1em;
      background-color: #33ff33;
      margin-left: 5px;
      animation: blink 1s steps(1) infinite;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="window">
    <div class="title-bar">
      <div class="window-controls">
        <div class="close"></div>
        <div class="minimize"></div>
        <div class="maximize"></div>
      </div>
      <div>root@cha:~</div>
    </div>
    <div class="terminal">
      <div class="terminal-content" id="terminalContent">
        <div class="prompt" id="promptLine">
          <span id="promptText">root@cha:~# </span><span class="cursor"></span>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const terminal = document.getElementById('terminalContent');
      const prompt = document.getElementById('promptLine');
      const promptText = document.getElementById('promptText');

      const bootLines = [
        "CHA // Chattanooga Hackers Anonymous",
        "",
        "Booting up node...",
        "Initializing protocol...",
        "Establishing secure connection...",
        "Access granted.",
        ""
      ];

      const manifestoQuotes = [
        "Another one got caught today, it's all over the papers.",
        "My crime is that of curiosity.",
        "I am a hacker, and this is my manifesto.",
        "You may stop this individual, but you can't stop us all... after all, we're all alike.",
        "We explore... and you call us criminals.",
        "We seek after knowledge... and you call us criminals.",
        "We exist without skin color, without nationality, without religious bias.",
        "You build atomic bombs, you wage wars, you murder, cheat, and lie to us and try to make us believe it's for our own good.",
        "This is our world now... the world of the electron and the switch, the beauty of the baud.",
        "We make use of a service already existing without paying for what could be dirt-cheap if it wasn't run by profiteering gluttons.",
        "We exist without borders, without limits.",
        "We don't do it for money. We do it because it's who we are.",
        "Yes, I am a criminal. My crime is that of curiosity.",
        "My crime is that of outsmarting you, something that you will never forgive me for.",
        "We tinker, we test, we break, we learn.",
        "This is it... this is where I belong.",
        "You bet your ass we're all alike.",
        "I’ve learned more from a Commodore 64 than from all the teachers at school.",
        "We are the hackers of the world."
      ];

      const motdQuotes = [
        "The world is a dangerous place, not because of those who do evil, but because of those who look on and do nothing. — Mr. Robot",
        "We are all living in each other's paranoia. — Mr. Robot",
        "Every lock can be picked. Every system can be broken. — Unknown",
        "Hack the planet! — Hackers (1995)",
        "There is no system that cannot be hacked. — Kevin Mitnick",
        "Good hackers don't break in, they walk in like they own the place. — Unknown",
        "The only secure computer is one that’s unplugged, locked in a safe, and buried 20 feet underground. — Gene Spafford",
        "You can’t patch human stupidity. — Bruce Schneier",
        "It's not a bug, it's a feature. — Every Developer Ever",
        "Walking again without pain hopefully does not come from physical capacity. It comes from from an indomitable will - Mobin A",
        "Information wants to be free. — Stewart Brand"
      ];

      let commandBuffer = "";
      let lineIndex = 0;
      let charIndex = 0;
      const typingSpeed = 40;
      const lineDelay = 600;

      function escapeHtml(text) {
        return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
      }

      function scrollToBottom() {
        const container = document.querySelector('.terminal');
        container.scrollTop = container.scrollHeight;
      }

      function updatePrompt() {
        promptText.innerHTML = `root@cha:~# ${escapeHtml(commandBuffer)}`;
        scrollToBottom();
      }

      function buildMotdLines(ip) {
        const ipLine = ip.includes(":") ? "OMG IPV6 HACKER" : `SERVER IP: ${ip}`;
        const contentLines = [
          "Welcome to NoogaHackers: Happy Hacking",
          ipLine,
          " ",
          " "
        ];
        const boxWidth = Math.max(...contentLines.map(line => line.length));
        const border = "+" + "-".repeat(boxWidth + 4) + "+";
        const padded = contentLines.map(line => {
          const pad = " ".repeat(Math.max(0, boxWidth - line.length));
          return `|  ${line}${pad}  |`;
        });
        return [border, ...padded, border];
      }

      function typeBootLines() {
        if (lineIndex < bootLines.length) {
          const currentLine = bootLines[lineIndex];
          if (charIndex < currentLine.length) {
            const char = document.createTextNode(currentLine.charAt(charIndex));
            terminal.insertBefore(char, prompt);
            scrollToBottom();
            charIndex++;
            setTimeout(typeBootLines, typingSpeed);
          } else {
            terminal.insertBefore(document.createElement('br'), prompt);
            lineIndex++;
            charIndex = 0;
            setTimeout(typeBootLines, lineDelay);
          }
        } else {
          fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => buildMotdLines(data.ip))
            .catch(() => buildMotdLines("UNKNOWN"))
            .then(lines => {
              lines.forEach(line => {
                const div = document.createElement('div');
                div.innerText = line;
                terminal.insertBefore(div, prompt);
              });
              terminal.insertBefore(document.createElement('br'), prompt);

              // Show random MOTD quote
              const randomMotd = motdQuotes[Math.floor(Math.random() * motdQuotes.length)];
              const quoteDiv = document.createElement('div');
              quoteDiv.innerHTML = `"${randomMotd}"<br/><br/>`;
              terminal.insertBefore(quoteDiv, prompt);

              prompt.style.visibility = 'visible';
              enableTyping();
            });
        }
      }

      function enableTyping() {
        document.addEventListener('keydown', function (e) {
          if (e.key === 'Backspace') {
            commandBuffer = commandBuffer.slice(0, -1);
            updatePrompt();
          } else if (e.key === 'Enter') {
            const cmdLine = document.createElement('div');
            cmdLine.innerText = `root@cha:~# ${commandBuffer}`;
            terminal.insertBefore(cmdLine, prompt);
            scrollToBottom();

            const cmd = commandBuffer.trim().toLowerCase();
            prompt.style.visibility = 'hidden';

            if (cmd === "cat manifesto.txt") {
              const quote = manifestoQuotes[Math.floor(Math.random() * manifestoQuotes.length)];
              const quoteEl = document.createElement('div');
              quoteEl.innerHTML = quote + "<br/><br/>-- The Mentor, 1986<br/><br/>";
              terminal.insertBefore(quoteEl, prompt);
            } else {
              const err = document.createElement('div');
              err.innerHTML = `bash: command not found: ${escapeHtml(commandBuffer)}<br/><br/>`;
              terminal.insertBefore(err, prompt);
            }

            commandBuffer = "";
            updatePrompt();
            prompt.style.visibility = 'visible';
          } else if (e.key.length === 1) {
            commandBuffer += e.key;
            updatePrompt();
          }
        });
      }

      typeBootLines();
    });
  </script>
</body>
</html>
